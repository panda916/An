USE [DIVA_GB00_FY23_24]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[SP_CREATE_RESULT_TAB]
AS
BEGIN

	IF EXISTS (SELECT *FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'B_WHERE_XML_USE_RESULT_TEMP')
		DROP TABLE dbo.B_WHERE_XML_USE_RESULT_TEMP

    CREATE TABLE dbo.B_WHERE_XML_USE_RESULT_TEMP (
		XML_NAME VARCHAR(128) NOT NULL,
		TABLE_NAME VARCHAR(128) NOT NULL,
		SEARCH_TEXT VARCHAR(128) NOT NULL,
		SP_NAME VARCHAR(128) NOT NULL
		PRIMARY KEY (XML_NAME, TABLE_NAME, SEARCH_TEXT,  SP_NAME)
	)


	IF EXISTS (SELECT *FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'B_WHERE_XML_USE_RESULT')
		DROP TABLE dbo.B_WHERE_XML_USE_RESULT

	CREATE TABLE dbo.B_WHERE_XML_USE_RESULT (
		XML_NAME VARCHAR(128) NOT NULL,
		TABLE_NAME VARCHAR(128) NOT NULL,
		FIELD_NAME VARCHAR(128) NOT NULL,
		SEARCH_TEXT VARCHAR(128) NOT NULL,
		SP_NAME VARCHAR(128)
	)

	IF EXISTS (SELECT *FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'B_WHERE_XML_USE_TABLE_LEVEL_RESULT')
		DROP TABLE dbo.B_WHERE_XML_USE_TABLE_LEVEL_RESULT

	CREATE TABLE dbo.B_WHERE_XML_USE_TABLE_LEVEL_RESULT (
		XML_NAME VARCHAR(128) NOT NULL,
		TABLE_NAME VARCHAR(128) NOT NULL,
		SEARCH_TEXT VARCHAR(128) NOT NULL,
		SP_NAME VARCHAR(128)
	)

	IF EXISTS (SELECT *FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'A_WHERE_XML_USE_TEMP')
		DROP TABLE dbo.A_WHERE_XML_USE_TEMP

	CREATE TABLE dbo.A_WHERE_XML_USE_TEMP (
		SP_NAME VARCHAR(128) NOT NULL PRIMARY KEY
	)

END






GO
